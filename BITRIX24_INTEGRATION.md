# üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Telegram –±–æ—Ç–∞ –∫ CRM –ë–∏—Ç—Ä–∏–∫—Å24.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å24](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∏—Ç—Ä–∏–∫—Å24)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–æ—Ç–∞)
3. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
4. [–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)

---

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å24

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ë–∏—Ç—Ä–∏–∫—Å24: `https://your-domain.bitrix24.ru`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º ‚Üí –î—Ä—É–≥–æ–µ ‚Üí –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –≤–µ–±—Ö—É–∫"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   - ‚úÖ CRM (crm)
   - ‚úÖ –ó–∞–¥–∞—á–∏ (task)
   - ‚úÖ –î–∏—Å–∫ (disk) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
   - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (user) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –≤–µ–±—Ö—É–∫–∞

URL –±—É–¥–µ—Ç –≤–∏–¥–∞:
```
https://your-domain.bitrix24.ru/rest/1/xxxxxxxxxx/
```

### –®–∞–≥ 2: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—è –≤ CRM:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **CRM ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π**
2. –í—ã–±–µ—Ä–∏—Ç–µ **–õ–∏–¥—ã**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—è:
   - **Telegram ID** (—Å—Ç—Ä–æ–∫–∞) - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è User ID
   - **Telegram Username** (—Å—Ç—Ä–æ–∫–∞) - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è @username
   - **–ò—Å—Ç–æ—á–Ω–∏–∫ –ª–∏–¥–∞** (—Å–ø–∏—Å–æ–∫) - –¥–æ–±–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ "Telegram Bot"

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ webhook URL –≤ .env

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω) –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```env
BOT_TOKEN=your_telegram_bot_token
BITRIX24_WEBHOOK=https://your-domain.bitrix24.ru/rest/1/xxxxxxxxxx/
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# Production –Ω–∞ Vercel
vercel --prod
```

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/contact`:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /contact
–ë–æ—Ç ‚Üí –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã
–ë–æ—Ç ‚Üí —Å–æ–∑–¥–∞–µ—Ç –ª–∏–¥ –≤ –ë–∏—Ç—Ä–∏–∫—Å24
–ú–µ–Ω–µ–¥–∂–µ—Ä ‚Üí –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π –ª–∏–¥ –≤ CRM
```

**–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `api/webhook.ts`**

### 2. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏–¥–æ–≤ —á–µ—Ä–µ–∑ AI

–ë–æ—Ç –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã, AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ª–∏–¥–∞:

```typescript
// –í api/webhook.ts –¥–æ–±–∞–≤—å—Ç–µ:

bot.command("qualify", async (ctx) => {
  await ctx.reply(
    "–î–∞–≤–∞–π—Ç–µ —É–∑–Ω–∞–µ–º –æ –≤–∞—à–µ–º –±–∏–∑–Ω–µ—Å–µ!\n\n" +
    "1. –ö–∞–∫–æ–π —É –≤–∞—Å –±–∏–∑–Ω–µ—Å?\n" +
    "2. –°–∫–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤?\n" +
    "3. –ö–∞–∫—É—é –∑–∞–¥–∞—á—É —Ö–æ—Ç–∏—Ç–µ —Ä–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é AI?"
  );
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å session –∏–ª–∏ –ë–î)
  // ...
});

// –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤:
const score = await qualifyLeadWithAI(answers);

await createLead({
  title: `–ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏–¥ - Score: ${score}/10`,
  name: answers.name,
  comments: `AI –æ—Ü–µ–Ω–∫–∞: ${score}/10\n\n${answers.details}`,
  // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–∞–∑–Ω—ã–µ –≤–æ—Ä–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç score
});
```

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö –≤ CRM:

```typescript
// –ü—Ä–∏–º–µ—Ä: –Ω–æ–≤—ã–π –ª–∏–¥ —Å–æ–∑–¥–∞–Ω –≤ –ë–∏—Ç—Ä–∏–∫—Å24
// –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å –≤ –ë–∏—Ç—Ä–∏–∫—Å24:
// –ù–æ–≤—ã–π –ª–∏–¥ ‚Üí –í–µ–±—Ö—É–∫ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram

bot.command("notify", async (ctx) => {
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ chat_id –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤ –±–∞–∑—É
});
```

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: AI Sales Assistant –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

–ú–µ–Ω–µ–¥–∂–µ—Ä—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å CRM –ø—Ä—è–º–æ –∏–∑ Telegram:

```typescript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤
bot.command("leads", async (ctx) => {
  const response = await fetch(
    `${BITRIX24_WEBHOOK}/crm.lead.list.json?filter[ASSIGNED_BY_ID]=${userId}`
  );
  const leads = await response.json();
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤
  // ...
});

// –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ª–∏–¥—É
bot.command("comment", async (ctx) => {
  // –§–æ—Ä–º–∞—Ç: /comment LEAD_ID —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  const [leadId, ...commentParts] = ctx.message.text.split(" ").slice(1);
  const comment = commentParts.join(" ");
  
  await addLeadComment(parseInt(leadId), comment);
  await ctx.reply("‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω");
});
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–¥–æ–≤

AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–∏–¥ –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ:

```typescript
import { generateIdea } from "./lib/ai"; // –ò—Å–ø–æ–ª—å–∑—É–µ–º AI

async function assignLeadToManager(leadData: any) {
  // AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–∏–¥
  const analysis = await analyzeLeadWithAI(leadData);
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ª—É—á—à–µ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
  const managerId = selectBestManager(analysis);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ª–∏–¥
  await updateLead(leadData.id, {
    ASSIGNED_BY_ID: managerId,
  });
  
  // –£–≤–µ–¥–æ–º–ª—è–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤ Telegram
  await bot.telegram.sendMessage(
    managerChatIds[managerId],
    `üîî –ù–æ–≤—ã–π –ª–∏–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω –≤–∞–º:\n${leadData.title}\n\nAI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${analysis.reason}`
  );
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã –ø–æ –ª–∏–¥–∞–º –∏–∑ –±–æ—Ç–∞:

```typescript
bot.command("report", async (ctx) => {
  const today = new Date().toISOString().split("T")[0];
  
  const response = await fetch(
    `${BITRIX24_WEBHOOK}/crm.lead.list.json?filter[>=DATE_CREATE]=${today}`
  );
  const data = await response.json();
  const leads = data.result;
  
  await ctx.reply(
    `üìä –û—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è:\n\n` +
    `–ù–æ–≤—ã—Ö –ª–∏–¥–æ–≤: ${leads.length}\n` +
    `–ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö: ${leads.filter(l => l.STATUS_ID === "NEW").length}\n` +
    `–í —Ä–∞–±–æ—Ç–µ: ${leads.filter(l => l.STATUS_ID === "IN_PROCESS").length}`
  );
});
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n

–°–æ–∑–¥–∞–π—Ç–µ workflow –≤ n8n –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π:

```
Telegram Bot ‚Üí n8n ‚Üí Bitrix24
                ‚Üì
            OpenAI (–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è)
                ‚Üì
            Google Sheets (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
                ‚Üì
            Slack (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–µ)
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ß—Ç–æ —Ç—Ä–µ–∫–∞—Ç—å:

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤ –∏–∑ –±–æ—Ç–∞** - –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ CRM
2. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è** - —Å–∫–æ–ª—å–∫–æ –ª–∏–¥–æ–≤ –∏–∑ –±–æ—Ç–∞ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
3. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** - –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ª–∏–¥—ã
4. **–ö–∞—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤** - AI score vs —Ä–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –≤ –ë–∏—Ç—Ä–∏–∫—Å24:

1. **CRM ‚Üí –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂**
2. –§–∏–ª—å—Ç—Ä: **–ò—Å—Ç–æ—á–Ω–∏–∫ = Telegram Bot**
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–∂–Ω–æ:

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ webhook URL –≤ git**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env`
   - –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`

2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ webhook**
   - –î–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
   - CRM + Tasks –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ**
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email
   - –°–∞–Ω–∏—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥

4. **Rate limiting**
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –ª–∏–¥–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Bitrix24 API error: 401"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–∏–¥—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ BITRIX24_WEBHOOK –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `console.log`
3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ webhook –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Postman

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–¥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ª–∏–¥–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º:

```typescript
// –ò—â–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ª–∏–¥ –ø–æ Telegram ID
const existing = await fetch(
  `${BITRIX24_WEBHOOK}/crm.lead.list.json?filter[UF_CRM_TELEGRAM_ID]=${userId}`
);

if (existing.result.length > 0) {
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
} else {
  // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
}
```

---

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ö–∞–∫ –ø—Ä–æ–¥–∞–≤–∞—Ç—å —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ:

1. **Setup fee:** $1,500 - $5,000
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –±–∏–∑–Ω–µ—Å
   - –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

2. **Monthly support:** $300 - $1,000/–º–µ—Å
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á

3. **Per-feature pricing:**
   - AI –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è: +$500
   - –ê–≤—Ç–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–¥–æ–≤: +$700
   - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã: +$400

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ë–∏—Ç—Ä–∏–∫—Å24 REST API:**
- https://dev.1c-bitrix.ru/rest_help/

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `crm.lead.add` - —Å–æ–∑–¥–∞—Ç—å –ª–∏–¥
- `crm.lead.update` - –æ–±–Ω–æ–≤–∏—Ç—å –ª–∏–¥
- `crm.lead.list` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤
- `crm.deal.add` - —Å–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É
- `tasks.task.add` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```bash
# –°–æ–∑–¥–∞—Ç—å –ª–∏–¥
curl https://your-domain.bitrix24.ru/rest/1/xxx/crm.lead.add.json \
  -d 'fields[TITLE]=Test Lead&fields[NAME]=John Doe'

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤
curl https://your-domain.bitrix24.ru/rest/1/xxx/crm.lead.list.json
```

---

## üéì –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤
3. üìù –î–æ–±–∞–≤–∏—Ç—å AI –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—é
4. üìù –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
5. üìù –°–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –æ—Ç—á–µ—Ç—ã
6. üìù –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å n8n –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö workflow

---

–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å? –°–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ Telegram!

