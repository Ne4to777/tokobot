# üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## –û–±–∑–æ—Ä

Tokobot —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ! –ë–æ—Ç –º–æ–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≤–∞—à—É —Ä–µ—á—å –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–∏–¥–µ—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤ Telegram
2. **–ë–æ—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª** —á–µ—Ä–µ–∑ Telegram Bot API
3. **Yandex SpeechKit —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ä–µ—á—å** (Speech-to-Text)
4. **–ë–æ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–º—É** –∏–∑ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
5. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –±–∏–∑–Ω–µ—Å-–∏–¥–µ—è** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º—ã
6. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç** —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏ –∏–¥–µ–µ–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Yandex SpeechKit

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Yandex SpeechKit API** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä—É—Å—Å–∫–æ–π —Ä–µ—á–∏:

- **API:** `https://stt.api.cloud.yandex.net/speech/v1/stt:recognize`
- **–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π (ru-RU)
- **–§–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ:** OGG Opus (—Ñ–æ—Ä–º–∞—Ç –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π Telegram)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Yandex SpeechKit

- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –†–§ –±–µ–∑ VPN
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç: **1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü**
- ‚úÖ –ù–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ API)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

–î–ª—è —Ä–∞–±–æ—Ç—ã –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω—É–∂–Ω—ã —Ç–µ –∂–µ –∫–ª—é—á–∏, —á—Ç–æ –∏ –¥–ª—è YandexGPT:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ [Yandex Cloud](https://cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ (folder)
3. –ü–æ–ª—É—á–∏—Ç–µ:
   - **API Key** –≤ —Ä–∞–∑–¥–µ–ª–µ Service Accounts
   - **Folder ID** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞—Ç–∞–ª–æ–≥–∞

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# YandexGPT + SpeechKit
YANDEX_API_KEY=your_api_key_here
YANDEX_FOLDER_ID=your_folder_id_here
AI_PROVIDER=yandexgpt
```

### 3. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Vercel –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω –∏ –∑–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –°–∫–∞–∂–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –±–∏–∑–Ω–µ—Å-–∏–¥–µ–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–º–∞—Ä–∫–µ—Ç–∏–Ω–≥", "–ø—Ä–æ–¥–∞–∂–∏", "hr")
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –ü–æ–ª—É—á–∏—Ç–µ:
   - –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
   - –ë–∏–∑–Ω–µ—Å-–∏–¥–µ—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º—ã

### –ü—Ä–∏–º–µ—Ä—ã –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

- üé§ "–ò–¥–µ—è –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞"
- üé§ "–ü—Ä–∏–¥—É–º–∞–π —á—Ç–æ-–Ω–∏–±—É–¥—å –¥–ª—è –ø—Ä–æ–¥–∞–∂"
- üé§ "HR —Ä–µ—à–µ–Ω–∏–µ —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º"
- üé§ "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç"

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. Telegram Bot API ‚Üí webhook.ts               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. voice.handler.ts                            ‚îÇ
‚îÇ     - –°–∫–∞—á–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª                       ‚îÇ
‚îÇ     - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ Buffer                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. yandex-stt.service.ts                       ‚îÇ
‚îÇ     - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ –≤ Yandex SpeechKit       ‚îÇ
‚îÇ     - –ü–æ–ª—É—á–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5. voice.handler.ts                            ‚îÇ
‚îÇ     - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–º—É –∏–∑ —Ç–µ–∫—Å—Ç–∞                  ‚îÇ
‚îÇ     - –í—ã–∑—ã–≤–∞–µ—Ç generateIdea()                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  6. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é            ‚îÇ
‚îÇ     - –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç                        ‚îÇ
‚îÇ     - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–¥–µ—è                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§–∞–π–ª—ã

| –§–∞–π–ª                                 | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ------------------------------------ | ----------------------------------------- |
| `src/handlers/voice.handler.ts`      | –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π   |
| `src/services/yandex-stt.service.ts` | –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex SpeechKit API  |
| `api/webhook.ts`                     | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `bot.on("voice")` |

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–µ–π
if (!config.yandexFolderId || !config.aiToken) {
  await ctx.reply("‚ùå –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã...");
  return;
}

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
if (voice.duration > 30) {
  await ctx.reply("‚è± –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ...");
  return;
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
try {
  const text = await recognizeSpeech(...);
} catch (error) {
  await ctx.reply("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä–µ—á—å...");
}
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞                     | –ü—Ä–∏—á–∏–Ω–∞                                             | –†–µ—à–µ–Ω–∏–µ                       |
| -------------------------- | --------------------------------------------------- | ----------------------------- |
| API –∫–ª—é—á–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã     | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç `YANDEX_API_KEY` –∏–ª–∏ `YANDEX_FOLDER_ID` | –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`             |
| –°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ  | –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ > 30 —Å–µ–∫—É–Ω–¥                     | –ó–∞–ø–∏—Å–∞—Ç—å –∫–æ—Ä–æ—á–µ               |
| –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä–µ—á—å | –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞                               | –ó–∞–ø–∏—Å–∞—Ç—å –≤ —Ç–∏—Ö–æ–º –º–µ—Å—Ç–µ        |
| 401 Unauthorized           | –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á                                   | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `YANDEX_API_KEY`    |
| 429 Too Many Requests      | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç                                      | –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–≤–æ—Ç—É |

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ API

- ‚è± **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 30 —Å–µ–∫—É–Ω–¥
- üìä **–§–æ—Ä–º–∞—Ç:** OGG Opus (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Telegram)
- üó£ **–Ø–∑—ã–∫:** –¢–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)

### –ö–≤–æ—Ç—ã Yandex Cloud

- üÜì **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Äif:** 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü
- üí∞ **–ü–ª–∞—Ç–Ω—ã–π —Ç–∞—Äif:** $0.0015 –∑–∞ 15 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Text-to-Speech

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```typescript
// src/services/yandex-tts.service.ts
export async function synthesizeSpeech(text: string): Promise<Buffer> {
  const response = await fetch(
    "https://tts.api.cloud.yandex.net/speech/v1/tts:synthesize",
    {
      method: "POST",
      headers: {
        Authorization: `Api-Key ${apiKey}`,
      },
      body: new URLSearchParams({
        text,
        lang: "ru-RU",
        voice: "alena", // –∏–ª–∏ –¥—Ä—É–≥–æ–π –≥–æ–ª–æ—Å
        format: "oggopus",
      }),
    }
  );

  return Buffer.from(await response.arrayBuffer());
}
```

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —è–∑—ã–∫–∞:

```typescript
const languageCode = detectLanguage(text) || "ru-RU";

await recognizeSpeech({
  languageCode, // "en-US", "de-DE", etc.
  // ...
});
```

### –î–ª–∏–Ω–Ω—ã–µ –∞—É–¥–∏–æ (Streaming API)

–î–ª—è –∞—É–¥–∏–æ > 30 —Å–µ–∫—É–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Streaming API:

```typescript
// –£–∂–µ –µ—Å—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫–∞ –≤ yandex-stt.service.ts
export async function recognizeSpeechStreaming(...) {
  // Streaming implementation
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp env.example .env
# –î–æ–±–∞–≤—å—Ç–µ YANDEX_API_KEY –∏ YANDEX_FOLDER_ID

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
npm run dev

# 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API

```bash
# –¢–µ—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ (–Ω—É–∂–µ–Ω –∞—É–¥–∏–æ—Ñ–∞–π–ª)
curl -X POST \
  https://stt.api.cloud.yandex.net/speech/v1/stt:recognize \
  -H "Authorization: Api-Key YOUR_API_KEY" \
  --data-binary "@test.ogg"
```

## FAQ

### –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ 30 —Å–µ–∫—É–Ω–¥?

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ API –¥–ª—è –Ω–∏–∑–∫–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏. –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∞—É–¥–∏–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Streaming API (—Å–º. —Ä–∞–∑–¥–µ–ª "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ").

### –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏?

–î–∞! Yandex SpeechKit –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–∏–µ —è–∑—ã–∫–∏. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `languageCode` –≤ `recognizeSpeech()`.

### –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?

- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ:** 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü
- **–ü–ª–∞—Ç–Ω–æ:** ~$0.0015 –∑–∞ 15 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ

### –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∏–∑ –†–§?

‚úÖ –î–∞! Yandex Cloud –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –†–æ—Å—Å–∏–∏ –±–µ–∑ VPN.

## –°—Å—ã–ª–∫–∏

- [Yandex SpeechKit Docs](https://cloud.yandex.ru/docs/speechkit/)
- [Telegram Bot API - Voice](https://core.telegram.org/bots/api#voice)
- [Yandex Cloud Console](https://console.cloud.yandex.ru/)

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö `YANDEX_API_KEY` –∏ `YANDEX_FOLDER_ID`. –ë–µ–∑ –Ω–∏—Ö –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–µ—Ä–Ω—É—Ç –æ—à–∏–±–∫—É –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
