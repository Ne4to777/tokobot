# ๐ค ะะตะทัะผะต: ะคัะฝะบัะธั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะณะพะปะพัะฐ

## โ ะงัะพ ะฑัะปะพ ะดะพะฑะฐะฒะปะตะฝะพ

### ะะพะฒัะต ัะฐะนะปั

#### ะกะตัะฒะธัั

- **`src/services/yandex-stt.service.ts`** - ะกะตัะฒะธั ะดะปั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ัะตัะธ ัะตัะตะท Yandex SpeechKit API

#### ะะฑัะฐะฑะพััะธะบะธ

- **`src/handlers/voice.handler.ts`** - ะะฑัะฐะฑะพััะธะบ ะณะพะปะพัะพะฒัั ัะพะพะฑัะตะฝะธะน ะฒ Telegram

#### ะะพะบัะผะตะฝัะฐัะธั

- **`docs/VOICE_RECOGNITION.md`** - ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ ััะฝะบัะธะธ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะณะพะปะพัะฐ
- **`docs/VOICE_DEMO.md`** - ะะตะผะพะฝัััะฐัะธั ะธ ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- **`docs/VOICE_CODE_EXAMPLES.md`** - ะัะธะผะตัั ะบะพะดะฐ ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ
- **`VOICE_QUICKSTART.md`** - ะัััััะน ััะฐัั (5 ะผะธะฝัั)

#### ะกะบัะธะฟัั

- **`scripts/test-voice.sh`** - ะกะบัะธะฟั ะดะปั ัะตััะธัะพะฒะฐะฝะธั ััะฝะบัะธะธ

### ะะทะผะตะฝัะฝะฝัะต ัะฐะนะปั

- **`api/webhook.ts`** - ะะพะฑะฐะฒะปะตะฝ ะพะฑัะฐะฑะพััะธะบ `bot.on("voice", voiceHandler)`
- **`src/handlers/index.ts`** - ะญะบัะฟะพัั `voiceHandler`
- **`src/handlers/help.handler.ts`** - ะะพะฑะฐะฒะปะตะฝะฐ ะธะฝัะพัะผะฐัะธั ะพ ะณะพะปะพัะพะฒัั ัะพะพะฑัะตะฝะธัั
- **`env.example`** - ะะฑะฝะพะฒะปะตะฝั ะบะพะผะผะตะฝัะฐัะธะธ ะฟัะพ SpeechKit
- **`README.md`** - ะะพะฑะฐะฒะปะตะฝะฐ ะธะฝัะพัะผะฐัะธั ะพ ะฝะพะฒะพะน ััะฝะบัะธะธ
- **`docs/README.md`** - ะะพะฑะฐะฒะปะตะฝั ัััะปะบะธ ะฝะฐ ะดะพะบัะผะตะฝัะฐัะธั

## ๐ฏ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

### ะงัะพ ัะผะตะตั ะฑะพั:

1. โ **ะัะธะฝะธะผะฐัั ะณะพะปะพัะพะฒัะต ัะพะพะฑัะตะฝะธั** (ะดะพ 30 ัะตะบัะฝะด)
2. โ **ะะฐัะฟะพะทะฝะฐะฒะฐัั ััััะบัั ัะตัั** ั ะฒััะพะบะพะน ัะพัะฝะพัััั (Yandex SpeechKit)
3. โ **ะะทะฒะปะตะบะฐัั ัะตะผั** ะธะท ัะฐัะฟะพะทะฝะฐะฝะฝะพะณะพ ัะตะบััะฐ
4. โ **ะะตะฝะตัะธัะพะฒะฐัั ะฑะธะทะฝะตั-ะธะดะตั** ะฝะฐ ะพัะฝะพะฒะต ัะตะผั
5. โ **ะะฑัะฐะฑะฐััะฒะฐัั ะพัะธะฑะบะธ** ะบะพััะตะบัะฝะพ (ะฟะปะพัะพะต ะบะฐัะตััะฒะพ, ะฟัะตะฒััะตะฝะธะต ะปะธะผะธัะฐ ะธ ั.ะด.)

### ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั:

```
ะะพะปัะทะพะฒะฐัะตะปั: ๐ค "ะะดะตั ะดะปั ะผะฐัะบะตัะธะฝะณะฐ"

ะะพั:
  ๐ค ะกะปััะฐั ะฒะฐัะต ัะพะพะฑัะตะฝะธะต...
  ๐ ะะฐัะฟะพะทะฝะฐั ะฒะฐัั ัะตัั...
  ๐ ะะฐัะฟะพะทะฝะฐะฝะพ: "ะธะดะตั ะดะปั ะผะฐัะบะตัะธะฝะณะฐ"
  ๐ก ะะตะฝะตัะธััั ะฑะธะทะฝะตั-ะธะดะตั...
  ๐ฏ ะะธะทะฝะตั-ะธะดะตั ะฟะพ ัะตะผะต "marketing": ...
```

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ
โ  Voice Message  โ
โ   (Telegram)    โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   voice.handler.ts          โ
โ   1. Download audio         โ
โ   2. Convert to Buffer      โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  yandex-stt.service.ts      โ
โ  Speech-to-Text (STT)       โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  extractTopicFromText()     โ
โ  Extract business topic     โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  generateIdea()             โ
โ  AI business idea           โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  Reply to user  โ
โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะขะตัะฝะพะปะพะณะธะธ

### API

- **Yandex SpeechKit** - ะะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ (STT)
- **Telegram Bot API** - ะะพะปััะตะฝะธะต ะณะพะปะพัะพะฒัั ัะฐะนะปะพะฒ
- **YandexGPT / Groq** - ะะตะฝะตัะฐัะธั ะธะดะตะน

### ะคะพัะผะฐัั

- **ะัะดะธะพ:** OGG Opus (ะฝะฐัะธะฒะฝัะน ัะพัะผะฐั Telegram)
- **ะฏะทัะบ:** ะัััะบะธะน (ru-RU)
- **ะะตัะพะด:** ะกะธะฝััะพะฝะฝะพะต ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต (ะดะพ 30 ัะตะบัะฝะด)

### ะะณัะฐะฝะธัะตะฝะธั

- โฑ **ะะปะธัะตะปัะฝะพััั:** ะะฐะบัะธะผัะผ 30 ัะตะบัะฝะด
- ๐ **ะะฒะพัะฐ:** 1000 ะทะฐะฟัะพัะพะฒ/ะผะตััั (ะฑะตัะฟะปะฐัะฝะพ)
- ๐ฃ **ะฏะทัะบ:** ะขะพะปัะบะพ ััััะบะธะน (ะผะพะถะฝะพ ัะฐััะธัะธัั)

## ๐ฐ ะกัะพะธะผะพััั

### ะะตัะฟะปะฐัะฝัะน ัะฐัะธั

- ๐ **1000 ะณะพะปะพัะพะฒัั ัะพะพะฑัะตะฝะธะน/ะผะตััั** - SpeechKit
- ๐ **1000 ะณะตะฝะตัะฐัะธะน ะธะดะตะน/ะผะตััั** - YandexGPT Lite

### ะะปะฐัะฝัะน ัะฐัะธั

- ๐ฐ **$0.0015 ะทะฐ 15 ัะตะบัะฝะด** ะฐัะดะธะพ (SpeechKit)
- ๐ฐ **~$0.003 ะทะฐ ะทะฐะฟัะพั** (YandexGPT)

**ะัะพะณะพ:** ~$4.5/ะผะตั ะดะปั 1000 ะฐะบัะธะฒะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

## ๐ฆ ะงัะพ ััะตะฑัะตััั ะดะปั ัะฐะฑะพัั

### ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:

```env
BOT_TOKEN=your_telegram_bot_token
YANDEX_API_KEY=your_yandex_api_key
YANDEX_FOLDER_ID=your_folder_id
```

### ะัะฐะฒะฐ ัะตัะฒะธัะฝะพะณะพ ะฐะบะบะฐัะฝัะฐ:

- `ai.languageModels.user` - ะดะปั YandexGPT
- `ai.speechkit-stt.user` - ะดะปั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ัะตัะธ

## ๐ ะัััััะน ััะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ

```bash
# ะะตัะตะผะตะฝะฝัะต ัะถะต ะตััั? ะะธัะตะณะพ ะฝะต ะฝัะถะฝะพ!
# ะะตั ะฟะตัะตะผะตะฝะฝัั? ะะพะฑะฐะฒััะต ะฒ .env:
YANDEX_API_KEY=...
YANDEX_FOLDER_ID=...
```

### 2. ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ

```bash
npm run dev
```

### 3. ะะตะฟะปะพะน ะฝะฐ Vercel

```bash
git add .
git commit -m "feat(voice): add voice recognition"
git push origin main
```

### 4. ะขะตััะธัะพะฒะฐะฝะธะต

ะัะฟัะฐะฒััะต ะณะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั ะฒ Telegram! ๐ค

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ะัััััะน ััะฐัั

- **[VOICE_QUICKSTART.md](VOICE_QUICKSTART.md)** - ะะฐะฟััะบ ะทะฐ 5 ะผะธะฝัั

### ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

- **[docs/VOICE_RECOGNITION.md](docs/VOICE_RECOGNITION.md)** - ะัะต ะดะตัะฐะปะธ
- **[docs/VOICE_DEMO.md](docs/VOICE_DEMO.md)** - ะะตะผะพะฝัััะฐัะธั ะธ ะฟัะธะผะตัั
- **[docs/VOICE_CODE_EXAMPLES.md](docs/VOICE_CODE_EXAMPLES.md)** - ะัะธะผะตัั ะบะพะดะฐ

### ะกะบัะธะฟัั

```bash
# ะขะตััะธัะพะฒะฐะฝะธะต ััะฝะบัะธะธ
chmod +x scripts/test-voice.sh
./scripts/test-voice.sh
```

## ๐ฎ ะะพะทะผะพะถะฝัะต ัะฐััะธัะตะฝะธั

### 1. Text-to-Speech (TTS)

ะะพั ะพัะฒะตัะฐะตั ะณะพะปะพัะพะผ:

```typescript
const audio = await synthesizeSpeech({ text: idea });
await ctx.replyWithVoice({ source: audio });
```

### 2. ะะฝะพะณะพัะทััะฝะพััั

ะะพะดะดะตัะถะบะฐ ะฐะฝะณะปะธะนัะบะพะณะพ, ะฝะตะผะตัะบะพะณะพ ะธ ะดั.:

```typescript
const lang = detectLanguage(audioBuffer);
await recognizeSpeech({ languageCode: lang });
```

### 3. ะะธะฐะปะพะณะพะฒัะน ัะตะถะธะผ

ะกะตัะธั ััะพัะฝัััะธั ะฒะพะฟัะพัะพะฒ:

```typescript
// "ะะปั ะบะฐะบะพะน ะธะฝะดััััะธะธ?"
// "ะะฐะบะพะน ะฑัะดะถะตั?"
// โ ะะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝะฐั ะธะดะตั
```

### 4. ะะฝะฐะปะธะท ัะผะพัะธะน

ะะฟัะตะดะตะปะตะฝะธะต ะฝะฐัััะพะตะฝะธั ะธะท ะณะพะปะพัะฐ:

```typescript
const emotion = await analyzeEmotion(audioBuffer);
// ะะดะฐะฟัะฐัะธั ะพัะฒะตัะฐ ะฟะพะด ะฝะฐัััะพะตะฝะธะต
```

## ๐ ะะตััะธะบะธ (ะดะปั ะฑัะดััะตะณะพ)

### ะััะปะตะถะธะฒะฐะฝะธะต ะธัะฟะพะปัะทะพะฒะฐะฝะธั:

- ะะพะปะธัะตััะฒะพ ะณะพะปะพัะพะฒัั ัะพะพะฑัะตะฝะธะน / ะดะตะฝั
- ะกัะตะดะฝัั ะดะปะธัะตะปัะฝะพััั ะฐัะดะธะพ
- ะฃัะฟะตัะฝะพััั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั (confidence)
- ะขะพะฟ ัะตะผั ะธะท ะณะพะปะพัะพะฒัั ะทะฐะฟัะพัะพะฒ
- ะัะตะผั ะพะฑัะฐะฑะพัะบะธ (latency)

### ะะฝะฐะปะธัะธะบะฐ ะบะฐัะตััะฒะฐ:

- ะัะพัะตะฝั ััะฟะตัะฝัั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะน
- ะัะพัะตะฝั ะพัะธะฑะพะบ API
- ะงะฐััะพัะฐ ะฟัะตะฒััะตะฝะธั ะปะธะผะธัะฐ 30 ัะตะบ
- User satisfaction (ะพะฟัะธะพะฝะฐะปัะฝะพ)

## โ ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

### ะะพะบะฐะปัะฝะพ

```bash
npm run dev
# ะัะฟัะฐะฒััะต ะณะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฒ Telegram
```

### ะะฐ ะฟัะพะดะฐะบัะตะฝะต

```bash
# ะัะพะฒะตัััะต ะปะพะณะธ Vercel
vercel logs

# ะะปะธ ะพัะฟัะฐะฒััะต ะณะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั
```

### ะขะตัั API ะฝะฐะฟััะผัั

```bash
# YandexGPT
curl -X POST https://llm.api.cloud.yandex.net/... \
  -H "Authorization: Api-Key $YANDEX_API_KEY"

# SpeechKit
curl -X POST https://stt.api.cloud.yandex.net/... \
  -H "Authorization: Api-Key $YANDEX_API_KEY" \
  --data-binary "@test.ogg"
```

## ๐ Troubleshooting

| ะัะพะฑะปะตะผะฐ                         | ะะตัะตะฝะธะต                                         |
| -------------------------------- | ----------------------------------------------- |
| "ะะพะปะพัะพะฒัะต ัะพะพะฑัะตะฝะธั ะฝะตะดะพัััะฟะฝั" | ะัะพะฒะตัััะต `YANDEX_API_KEY` ะธ `YANDEX_FOLDER_ID` |
| "ะะต ัะดะฐะปะพัั ัะฐัะฟะพะทะฝะฐัั ัะตัั"     | ะฃะปัััะธัะต ะบะฐัะตััะฒะพ ะทะฐะฟะธัะธ, ะณะพะฒะพัะธัะต ััััะต        |
| "ะกะพะพะฑัะตะฝะธะต ัะปะธัะบะพะผ ะดะปะธะฝะฝะพะต"      | ะะฐะฟะธััะฒะฐะนัะต ะดะพ 30 ัะตะบัะฝะด                        |
| "401 Unauthorized"               | ะัะพะฒะตัััะต API ะบะปัั                              |
| "429 Too Many Requests"          | ะัะตะฒััะตะฝ ะปะธะผะธั, ะฟะพะดะพะถะดะธัะต                       |

## ๐ ะะพัะพะฒะพ!

ะคัะฝะบัะธั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะณะพะปะพัะฐ ะฟะพะปะฝะพัััั ะธะฝัะตะณัะธัะพะฒะฐะฝะฐ ะธ ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

### ะงัะพ ะดะฐะปััะต?

1. **ะัะพัะตััะธััะนัะต ะปะพะบะฐะปัะฝะพ** - `npm run dev` โ ะพัะฟัะฐะฒััะต ะณะพะปะพัะพะฒะพะต
2. **ะะฐะดะตะฟะปะพะนัะต ะฝะฐ Vercel** - `git push`
3. **ะะพะฟัะพะฑัะนัะต ัะฐะทะฝัะต ะทะฐะฟัะพัั** - ะผะฐัะบะตัะธะฝะณ, ะฟัะพะดะฐะถะธ, HR ะธ ั.ะด.
4. **ะะฐััะธัััะต ััะฝะบัะธะพะฝะฐะป** - TTS, ะดััะณะธะต ัะทัะบะธ, ะดะธะฐะปะพะณะธ

---

## ๐ ะะพะดะดะตัะถะบะฐ

- ๐ **ะะพะบัะผะตะฝัะฐัะธั:** [docs/VOICE_RECOGNITION.md](docs/VOICE_RECOGNITION.md)
- ๐ฌ **ะะตะผะพ:** [docs/VOICE_DEMO.md](docs/VOICE_DEMO.md)
- ๐ป **ะัะธะผะตัั ะบะพะดะฐ:** [docs/VOICE_CODE_EXAMPLES.md](docs/VOICE_CODE_EXAMPLES.md)
- ๐ **ะัััััะน ััะฐัั:** [VOICE_QUICKSTART.md](VOICE_QUICKSTART.md)

---

**ะกะดะตะปะฐะฝะพ ั โค๏ธ ะธ TypeScript**

๐ค **ะะพะฟัะพะฑัะนัะต ะฟััะผะพ ัะตะนัะฐั!** ะัะฟัะฐะฒััะต ะณะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั!
